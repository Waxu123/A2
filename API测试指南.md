# API æµ‹è¯•æŒ‡å— - Postman

æœ¬æŒ‡å—å¸®åŠ©æ‚¨ä½¿ç”¨Postmanæµ‹è¯•æ…ˆå–„æ´»åŠ¨ç®¡ç†ç³»ç»Ÿçš„APIç«¯ç‚¹ã€‚

---

## å‡†å¤‡å·¥ä½œ

1. ä¸‹è½½å¹¶å®‰è£… [Postman](https://www.postman.com/downloads/)
2. ç¡®ä¿APIæœåŠ¡å™¨æ­£åœ¨è¿è¡Œï¼ˆ`http://localhost:3000`ï¼‰
3. ç¡®ä¿æ•°æ®åº“å·²æ­£ç¡®è®¾ç½®å¹¶åŒ…å«ç¤ºä¾‹æ•°æ®

---

## æµ‹è¯•ç«¯ç‚¹

### 1ï¸âƒ£ è·å–APIä¿¡æ¯

**è¯·æ±‚:**
```
GET http://localhost:3000/
```

**é¢„æœŸå“åº”:**
```json
{
    "message": "æ…ˆå–„æ´»åŠ¨ç®¡ç†ç³»ç»Ÿ API",
    "version": "1.0.0",
    "endpoints": {
        "events": "/api/events - è·å–æ‰€æœ‰å½“å‰/å³å°†ä¸¾è¡Œçš„æ´»åŠ¨",
        "eventById": "/api/events/:id - è·å–ç‰¹å®šæ´»åŠ¨è¯¦æƒ…",
        "categories": "/api/categories - è·å–æ‰€æœ‰æ´»åŠ¨ç±»åˆ«",
        "search": "/api/events/search - æœç´¢æ´»åŠ¨"
    }
}
```

**æµ‹è¯•è¦ç‚¹:**
- âœ… çŠ¶æ€ç åº”ä¸º 200
- âœ… è¿”å›APIåŸºæœ¬ä¿¡æ¯

---

### 2ï¸âƒ£ è·å–æ‰€æœ‰æ´»åŠ¨

**è¯·æ±‚:**
```
GET http://localhost:3000/api/events
```

**é¢„æœŸå“åº”:**
```json
{
    "success": true,
    "count": 10,
    "data": [
        {
            "event_id": 1,
            "event_name": "å¸Œæœ›ä¹‹å…‰æ…ˆå–„æ™šå®´2025",
            "description": "ä¸€åœºæ¸©é¦¨çš„æ…ˆå–„æ™šå®´...",
            "event_date": "2025-11-15",
            "event_time": "18:00:00",
            "location": "å¸‚ä¸­å¿ƒå¤§é…’åº—",
            "city": "æ‚‰å°¼",
            "ticket_price": "150.00",
            "is_free": 0,
            "image_url": "...",
            "status": "upcoming",
            "category_name": "æ…ˆå–„æ™šå®´",
            "organization_name": "çˆ±å¿ƒåŸºé‡‘ä¼š"
        },
        ...
    ]
}
```

**æµ‹è¯•è¦ç‚¹:**
- âœ… çŠ¶æ€ç åº”ä¸º 200
- âœ… `success` å­—æ®µä¸º `true`
- âœ… `count` æ˜¾ç¤ºæ´»åŠ¨æ•°é‡
- âœ… `data` æ•°ç»„åŒ…å«æ´»åŠ¨åˆ—è¡¨
- âœ… æ¯ä¸ªæ´»åŠ¨åŒ…å«æ‰€æœ‰å¿…éœ€å­—æ®µ
- âœ… åªè¿”å›æœªæš‚åœçš„å³å°†ä¸¾è¡Œçš„æ´»åŠ¨

---

### 3ï¸âƒ£ è·å–ç‰¹å®šæ´»åŠ¨è¯¦æƒ…

**è¯·æ±‚:**
```
GET http://localhost:3000/api/events/1
```

**é¢„æœŸå“åº”:**
```json
{
    "success": true,
    "data": {
        "event_id": 1,
        "event_name": "å¸Œæœ›ä¹‹å…‰æ…ˆå–„æ™šå®´2025",
        "description": "ä¸€åœºæ¸©é¦¨çš„æ…ˆå–„æ™šå®´...",
        "detailed_description": "åŠ å…¥æˆ‘ä»¬çš„å¹´åº¦æ…ˆå–„æ™šå®´...",
        "event_date": "2025-11-15",
        "event_time": "18:00:00",
        "location": "å¸‚ä¸­å¿ƒå¤§é…’åº—",
        "city": "æ‚‰å°¼",
        "address": "123 George Street, Sydney NSW 2000",
        "category_id": 1,
        "organization_id": 1,
        "ticket_price": "150.00",
        "is_free": 0,
        "fundraising_goal": "50000.00",
        "current_funds": "32000.00",
        "max_participants": 200,
        "current_participants": 156,
        "image_url": "...",
        "is_suspended": 0,
        "status": "upcoming",
        "category_name": "æ…ˆå–„æ™šå®´",
        "category_description": "...",
        "organization_name": "çˆ±å¿ƒåŸºé‡‘ä¼š",
        "organization_description": "...",
        "contact_email": "info@lovefoundation.org",
        "contact_phone": "1300-123-456",
        "website": "www.lovefoundation.org"
    }
}
```

**æµ‹è¯•è¦ç‚¹:**
- âœ… çŠ¶æ€ç åº”ä¸º 200
- âœ… è¿”å›å®Œæ•´çš„æ´»åŠ¨è¯¦æƒ…
- âœ… åŒ…å«ç»„ç»‡å’Œç±»åˆ«ä¿¡æ¯

**æµ‹è¯•ä¸å­˜åœ¨çš„æ´»åŠ¨:**
```
GET http://localhost:3000/api/events/999
```

**é¢„æœŸå“åº”:**
```json
{
    "success": false,
    "message": "æœªæ‰¾åˆ°è¯¥æ´»åŠ¨"
}
```

**æµ‹è¯•è¦ç‚¹:**
- âœ… çŠ¶æ€ç åº”ä¸º 404
- âœ… è¿”å›é€‚å½“çš„é”™è¯¯æ¶ˆæ¯

---

### 4ï¸âƒ£ è·å–æ´»åŠ¨ç±»åˆ«

**è¯·æ±‚:**
```
GET http://localhost:3000/api/categories
```

**é¢„æœŸå“åº”:**
```json
{
    "success": true,
    "count": 7,
    "data": [
        {
            "category_id": 1,
            "category_name": "æ…ˆå–„æ™šå®´",
            "description": "æ­£å¼çš„ç­¹æ¬¾æ™šå®´æ´»åŠ¨..."
        },
        {
            "category_id": 2,
            "category_name": "è¶£å‘³è·‘",
            "description": "å¥åº·æœ‰è¶£çš„è·‘æ­¥æ´»åŠ¨..."
        },
        ...
    ]
}
```

**æµ‹è¯•è¦ç‚¹:**
- âœ… çŠ¶æ€ç åº”ä¸º 200
- âœ… è¿”å›æ‰€æœ‰æ´»åŠ¨ç±»åˆ«
- âœ… æ¯ä¸ªç±»åˆ«åŒ…å«IDã€åç§°å’Œæè¿°

---

### 5ï¸âƒ£ è·å–åŸå¸‚åˆ—è¡¨

**è¯·æ±‚:**
```
GET http://localhost:3000/api/cities
```

**é¢„æœŸå“åº”:**
```json
{
    "success": true,
    "count": 4,
    "data": [
        "å¸ƒé‡Œæ–¯ç­",
        "å¢¨å°”æœ¬",
        "ç€æ–¯",
        "æ‚‰å°¼"
    ]
}
```

**æµ‹è¯•è¦ç‚¹:**
- âœ… çŠ¶æ€ç åº”ä¸º 200
- âœ… è¿”å›ä¸é‡å¤çš„åŸå¸‚åˆ—è¡¨
- âœ… åŸå¸‚æŒ‰å­—æ¯é¡ºåºæ’åº

---

### 6ï¸âƒ£ æœç´¢æ´»åŠ¨ï¼ˆæ— ç­›é€‰æ¡ä»¶ï¼‰

**è¯·æ±‚:**
```
GET http://localhost:3000/api/events/search
```

**é¢„æœŸå“åº”:**
```json
{
    "success": true,
    "count": 10,
    "filters": {
        "date": null,
        "city": null,
        "category": null
    },
    "data": [...]
}
```

**æµ‹è¯•è¦ç‚¹:**
- âœ… æ— ç­›é€‰æ¡ä»¶æ—¶è¿”å›æ‰€æœ‰æ´»åŠ¨
- âœ… filterså­—æ®µæ˜¾ç¤ºä¸ºnull

---

### 7ï¸âƒ£ æœç´¢æ´»åŠ¨ï¼ˆæŒ‰åŸå¸‚ç­›é€‰ï¼‰

**è¯·æ±‚:**
```
GET http://localhost:3000/api/events/search?city=æ‚‰å°¼
```

**é¢„æœŸå“åº”:**
```json
{
    "success": true,
    "count": 6,
    "filters": {
        "date": null,
        "city": "æ‚‰å°¼",
        "category": null
    },
    "data": [
        // åªåŒ…å«æ‚‰å°¼çš„æ´»åŠ¨
    ]
}
```

**æµ‹è¯•è¦ç‚¹:**
- âœ… åªè¿”å›æŒ‡å®šåŸå¸‚çš„æ´»åŠ¨
- âœ… filterså­—æ®µæ­£ç¡®æ˜¾ç¤ºç­›é€‰æ¡ä»¶

---

### 8ï¸âƒ£ æœç´¢æ´»åŠ¨ï¼ˆæŒ‰ç±»åˆ«ç­›é€‰ï¼‰

**è¯·æ±‚:**
```
GET http://localhost:3000/api/events/search?category=2
```

**é¢„æœŸå“åº”:**
```json
{
    "success": true,
    "count": 2,
    "filters": {
        "date": null,
        "city": null,
        "category": "2"
    },
    "data": [
        // åªåŒ…å«ç±»åˆ«IDä¸º2çš„æ´»åŠ¨
    ]
}
```

**æµ‹è¯•è¦ç‚¹:**
- âœ… åªè¿”å›æŒ‡å®šç±»åˆ«çš„æ´»åŠ¨
- âœ… category_idåŒ¹é…ç­›é€‰æ¡ä»¶

---

### 9ï¸âƒ£ æœç´¢æ´»åŠ¨ï¼ˆæŒ‰æ—¥æœŸç­›é€‰ï¼‰

**è¯·æ±‚:**
```
GET http://localhost:3000/api/events/search?date=2025-11-15
```

**é¢„æœŸå“åº”:**
```json
{
    "success": true,
    "count": 1,
    "filters": {
        "date": "2025-11-15",
        "city": null,
        "category": null
    },
    "data": [
        {
            "event_id": 1,
            "event_name": "å¸Œæœ›ä¹‹å…‰æ…ˆå–„æ™šå®´2025",
            "event_date": "2025-11-15",
            ...
        }
    ]
}
```

**æµ‹è¯•è¦ç‚¹:**
- âœ… åªè¿”å›æŒ‡å®šæ—¥æœŸçš„æ´»åŠ¨
- âœ… event_dateåŒ¹é…ç­›é€‰æ—¥æœŸ

---

### ğŸ”Ÿ æœç´¢æ´»åŠ¨ï¼ˆå¤šæ¡ä»¶ç»„åˆï¼‰

**è¯·æ±‚:**
```
GET http://localhost:3000/api/events/search?city=æ‚‰å°¼&category=2
```

**é¢„æœŸå“åº”:**
```json
{
    "success": true,
    "count": 1,
    "filters": {
        "date": null,
        "city": "æ‚‰å°¼",
        "category": "2"
    },
    "data": [
        // æ‚‰å°¼ + ç±»åˆ«2 çš„æ´»åŠ¨
    ]
}
```

**æµ‹è¯•è¦ç‚¹:**
- âœ… æ‰€æœ‰ç­›é€‰æ¡ä»¶åŒæ—¶ç”Ÿæ•ˆ
- âœ… ç»“æœç¬¦åˆæ‰€æœ‰ç­›é€‰æ¡ä»¶

---

## åˆ›å»ºPostmané›†åˆ

### å¿«é€Ÿå¯¼å…¥

æ‚¨å¯ä»¥åˆ›å»ºä¸€ä¸ªPostmané›†åˆæ¥ä¿å­˜æ‰€æœ‰æµ‹è¯•ï¼š

1. æ‰“å¼€Postman
2. ç‚¹å‡» "New" â†’ "Collection"
3. å‘½åä¸º "æ…ˆå–„æ´»åŠ¨ç®¡ç†ç³»ç»Ÿ API"
4. ä¸ºæ¯ä¸ªç«¯ç‚¹åˆ›å»ºè¯·æ±‚
5. ä¿å­˜é›†åˆä»¥ä¾¿é‡å¤ä½¿ç”¨

### ç¯å¢ƒå˜é‡è®¾ç½®

åœ¨Postmanä¸­è®¾ç½®ç¯å¢ƒå˜é‡ï¼š

1. ç‚¹å‡»å³ä¸Šè§’çš„é½¿è½®å›¾æ ‡
2. é€‰æ‹© "Manage Environments"
3. æ·»åŠ æ–°ç¯å¢ƒï¼š
   - å˜é‡å: `base_url`
   - åˆå§‹å€¼: `http://localhost:3000`
   - å½“å‰å€¼: `http://localhost:3000`

4. åœ¨è¯·æ±‚ä¸­ä½¿ç”¨: `{{base_url}}/api/events`

---

## æµ‹è¯•æ£€æŸ¥æ¸…å•

ä½¿ç”¨æ­¤æ¸…å•éªŒè¯æ‰€æœ‰ç«¯ç‚¹ï¼š

- [ ] APIæ ¹è·¯å¾„è¿”å›æ­£ç¡®ä¿¡æ¯
- [ ] è·å–æ‰€æœ‰æ´»åŠ¨æˆåŠŸ
- [ ] è·å–å•ä¸ªæ´»åŠ¨è¯¦æƒ…æˆåŠŸ
- [ ] ä¸å­˜åœ¨çš„æ´»åŠ¨è¿”å›404
- [ ] è·å–ç±»åˆ«åˆ—è¡¨æˆåŠŸ
- [ ] è·å–åŸå¸‚åˆ—è¡¨æˆåŠŸ
- [ ] æ— ç­›é€‰æœç´¢è¿”å›æ‰€æœ‰æ´»åŠ¨
- [ ] æŒ‰åŸå¸‚ç­›é€‰æ­£å¸¸å·¥ä½œ
- [ ] æŒ‰ç±»åˆ«ç­›é€‰æ­£å¸¸å·¥ä½œ
- [ ] æŒ‰æ—¥æœŸç­›é€‰æ­£å¸¸å·¥ä½œ
- [ ] å¤šæ¡ä»¶ç»„åˆç­›é€‰æ­£å¸¸å·¥ä½œ
- [ ] æ‰€æœ‰å“åº”æ ¼å¼ä¸€è‡´
- [ ] é”™è¯¯å¤„ç†é€‚å½“

---

## å¸¸è§æµ‹è¯•é—®é¢˜

### é—®é¢˜1: è¿æ¥è¢«æ‹’ç»

**é”™è¯¯:** `Could not get any response`

**è§£å†³:**
- ç¡®ä¿APIæœåŠ¡å™¨æ­£åœ¨è¿è¡Œ
- æ£€æŸ¥URLæ˜¯å¦æ­£ç¡®
- ç¡®è®¤ç«¯å£3000æœªè¢«å ç”¨

### é—®é¢˜2: è¿”å›ç©ºæ•°ç»„

**é”™è¯¯:** `data: []`

**è§£å†³:**
- æ£€æŸ¥æ•°æ®åº“æ˜¯å¦æœ‰æ•°æ®
- ç¡®è®¤SQLæ–‡ä»¶å·²æ­£ç¡®å¯¼å…¥
- æ£€æŸ¥æ´»åŠ¨æ—¥æœŸæ˜¯å¦éƒ½åœ¨è¿‡å»

### é—®é¢˜3: CORSé”™è¯¯

**é”™è¯¯:** CORSç›¸å…³é”™è¯¯

**è§£å†³:**
- ä»Postmanå‘é€è¯·æ±‚ä¸ä¼šæœ‰CORSé—®é¢˜
- å¦‚æœä»æµè§ˆå™¨æµ‹è¯•ï¼Œç¡®ä¿APIå¯ç”¨äº†CORS

---

## è¿›é˜¶æµ‹è¯•

### æ€§èƒ½æµ‹è¯•
- æµ‹è¯•APIå“åº”æ—¶é—´
- ä½¿ç”¨Postman Runneræ‰¹é‡æµ‹è¯•
- æ£€æŸ¥å¤§é‡æ•°æ®æ—¶çš„æ€§èƒ½

### è¾¹ç•Œæµ‹è¯•
- æµ‹è¯•æ— æ•ˆçš„IDï¼ˆè´Ÿæ•°ã€è¶…å¤§æ•°å­—ï¼‰
- æµ‹è¯•ç‰¹æ®Šå­—ç¬¦
- æµ‹è¯•SQLæ³¨å…¥é˜²æŠ¤

---

**æµ‹è¯•æ„‰å¿«ï¼** ğŸ§ªâœ…

