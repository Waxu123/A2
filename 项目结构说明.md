# 慈善活动管理系统 - 项目结构说明

## 📁 完整项目结构

```
慈善活动管理系统/
│
├── 📂 api/                                    # 后端API服务器
│   ├── 📂 database/
│   │   └── charityevents_db.sql              # MySQL数据库创建脚本
│   │                                          # 包含：表结构、关系、示例数据
│   │
│   ├── event_db.js                            # 数据库连接配置文件
│   │                                          # 功能：MySQL连接池、错误处理
│   │
│   ├── server.js                              # Express API服务器主文件
│   │                                          # 包含：5个RESTful端点、错误处理
│   │
│   └── package.json                           # API项目依赖配置
│                                              # 依赖：express, mysql2, cors
│
├── 📂 client/                                 # 前端客户端网站
│   │
│   ├── 📂 css/
│   │   └── styles.css                        # 全局样式表
│   │                                          # 包含：响应式设计、动画、主题色
│   │
│   ├── 📂 js/
│   │   ├── api.js                            # API封装模块
│   │   │                                     # 类：CharityEventsAPI
│   │   │                                     # 工具函数：格式化、错误处理
│   │   │
│   │   ├── home.js                           # 首页业务逻辑
│   │   │                                     # 功能：加载活动、渲染卡片
│   │   │
│   │   ├── search.js                         # 搜索页业务逻辑
│   │   │                                     # 功能：筛选、搜索、清除
│   │   │
│   │   └── details.js                        # 详情页业务逻辑
│   │                                          # 功能：加载详情、进度条、模态框
│   │
│   ├── index.html                             # 首页
│   │                                          # 内容：Hero横幅、关于我们、活动列表
│   │
│   ├── search.html                            # 搜索页
│   │                                          # 内容：筛选表单、搜索结果
│   │
│   └── details.html                           # 活动详情页
│                                              # 内容：完整活动信息、注册按钮
│
├── 📄 README.md                               # 主项目文档
│                                              # 内容：完整的安装、使用、API文档
│
├── 📄 项目报告.md                             # 评估报告模板
│                                              # 内容：设计决策、技术说明、学习总结
│
├── 📄 快速启动指南.md                         # 快速入门指南
│                                              # 内容：5分钟启动步骤、常见问题
│
├── 📄 API测试指南.md                          # Postman测试指南
│                                              # 内容：端点测试、预期响应
│
├── 📄 项目结构说明.md                         # 本文件
│                                              # 内容：项目结构、文件说明
│
└── 📄 .gitignore                              # Git忽略配置
                                               # 内容：node_modules、环境变量等

```

---

## 🎯 核心功能模块

### 1. 数据库层（Database Layer）

**文件:** `api/database/charityevents_db.sql`

**包含:**
- 3个核心表：
  - `charity_organizations` - 慈善组织（4条记录）
  - `event_categories` - 活动类别（7个类别）
  - `charity_events` - 慈善活动（10个示例活动）
- 外键关系
- 索引优化
- 示例数据

**技术特点:**
- 规范化设计（第三范式）
- 完整性约束
- 性能优化索引

---

### 2. API服务层（API Layer）

**文件:** `api/server.js` + `api/event_db.js`

**端点列表:**
1. `GET /api/events` - 获取所有活动
2. `GET /api/events/:id` - 获取活动详情
3. `GET /api/categories` - 获取类别
4. `GET /api/cities` - 获取城市
5. `GET /api/events/search` - 搜索活动

**技术特点:**
- RESTful设计原则
- 异步数据库操作（async/await）
- 统一错误处理
- CORS支持
- 参数化查询（防SQL注入）

---

### 3. 前端展示层（Presentation Layer）

#### 3.1 首页 (index.html + home.js)

**功能:**
- ✅ 静态内容展示（组织信息）
- ✅ 动态活动列表（API调用）
- ✅ 活动卡片渲染
- ✅ 链接到详情页

**技术实现:**
- Fetch API异步请求
- DOM动态创建元素
- 错误和加载状态处理

#### 3.2 搜索页 (search.html + search.js)

**功能:**
- ✅ 多条件筛选表单
- ✅ 动态加载筛选选项
- ✅ 清除筛选（DOM操作）
- ✅ 搜索结果展示

**技术实现:**
- 表单事件处理
- URLSearchParams构建查询
- 动态DOM操作
- 条件渲染

#### 3.3 详情页 (details.html + details.js)

**功能:**
- ✅ URL参数读取
- ✅ 完整信息展示
- ✅ 筹款进度可视化
- ✅ 注册模态框

**技术实现:**
- URL参数解析
- 进度条动画
- 模态框交互
- 事件监听

---

## 🔄 数据流架构

```
┌─────────────────┐
│   用户浏览器    │
│  (Client Side)  │
└────────┬────────┘
         │
         │ HTTP请求 (Fetch API)
         ↓
┌─────────────────┐
│  Express.js     │
│   API服务器     │
│  (port 3000)    │
└────────┬────────┘
         │
         │ SQL查询 (mysql2)
         ↓
┌─────────────────┐
│     MySQL       │
│     数据库      │
│ charityevents_db│
└─────────────────┘
```

**数据流程:**
1. 用户在浏览器访问页面
2. JavaScript通过Fetch API发送HTTP请求
3. Express服务器接收请求
4. 服务器查询MySQL数据库
5. 数据库返回结果
6. 服务器将结果格式化为JSON
7. JavaScript接收JSON数据
8. DOM操作将数据渲染到页面

---

## 🛠️ 技术栈详情

### 后端技术
| 技术 | 版本 | 用途 |
|------|------|------|
| Node.js | 14+ | JavaScript运行环境 |
| Express.js | 4.18.2 | Web应用框架 |
| MySQL | 8.0+ | 关系型数据库 |
| mysql2 | 3.6.0 | MySQL数据库驱动 |
| cors | 2.8.5 | 跨域资源共享 |

### 前端技术
| 技术 | 用途 |
|------|------|
| HTML5 | 页面结构 |
| CSS3 | 样式设计、响应式布局 |
| JavaScript (ES6+) | 交互逻辑 |
| Fetch API | HTTP请求 |
| DOM API | 页面元素操作 |

---

## 📊 代码统计

### 后端代码
- `server.js`: ~280行
- `event_db.js`: ~50行
- `charityevents_db.sql`: ~200行
- **总计:** ~530行

### 前端代码
- **HTML:** ~450行（3个文件）
- **CSS:** ~750行
- **JavaScript:** ~650行（4个文件）
- **总计:** ~1850行

### 文档
- **README.md:** ~400行
- **项目报告.md:** ~600行
- **其他文档:** ~400行
- **总计:** ~1400行

**项目总代码量:** ~3800行

---

## 🎨 设计模式

### 1. 模块化设计
- API逻辑封装在独立类中
- 每个页面有独立的JavaScript文件
- 样式集中管理

### 2. 关注点分离
- 数据层（MySQL）
- 业务逻辑层（Express API）
- 展示层（HTML/CSS/JS）

### 3. DRY原则（Don't Repeat Yourself）
- 统一的API调用函数
- 可复用的工具函数
- 统一的错误处理

---

## ✅ 满足的评估要求

### 数据库要求 (20%)
- ✅ 使用MySQL设计数据库
- ✅ 数据库名为 `charityevents_db`
- ✅ 包含活动、类别、组织表
- ✅ 主键/外键关系
- ✅ 至少8个示例活动
- ✅ 多个活动类别
- ✅ 提供SQL导出文件
- ✅ `event_db.js` 连接文件

### API要求 (15%)
- ✅ Node.js + Express
- ✅ RESTful设计
- ✅ 获取首页活动列表
- ✅ 按条件搜索活动
- ✅ 获取活动类别
- ✅ 获取活动详情
- ✅ 安全性考虑

### 客户端要求 (45%)
- ✅ 首页（静态+动态内容）
- ✅ 全站导航菜单
- ✅ 搜索页（筛选表单）
- ✅ 清除筛选按钮
- ✅ 活动详情页
- ✅ URL参数传递
- ✅ 注册按钮（模态框）
- ✅ 不使用AngularJS

### 其他要求 (20%)
- ✅ 代码注释
- ✅ 项目文档
- ✅ 可编译运行
- ✅ 展示工作进度（GitHub）

---

## 📦 提交文件清单

### 需要提交的文件：

1. **源代码压缩包:**
   - `usernameA2-api.zip` (包含 api/ 文件夹)
   - `usernameA2-clientside.zip` (包含 client/ 文件夹)

2. **项目文档:**
   - 填写完整的项目报告

3. **GitHub链接:**
   - 包含所有代码和定期提交记录

4. **演示视频:**
   - 最长15分钟
   - 展示数据库、API和网站功能

---

## 🚀 下一步（评估3）

以下功能将在A3中实现：
- 用户注册和登录
- 实际的活动报名功能
- 管理员后台
- 可选：使用AngularJS重构

---

## 💡 项目亮点

1. **完整的全栈实现** - 从数据库到前端的完整流程
2. **专业的代码质量** - 详细注释、错误处理、模块化设计
3. **优秀的用户体验** - 响应式设计、加载状态、友好的错误提示
4. **详尽的文档** - 多个文档文件，易于理解和使用
5. **真实的数据** - 10个精心设计的示例活动
6. **良好的可维护性** - 清晰的代码结构，易于扩展

---

**项目完成日期:** 2025年10月3日  
**开发者:** [您的姓名]

